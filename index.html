// Geocoding
async function getArea(lat, lng) {
    try {
        const res = await fetch(
            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=16`,
            { headers: { 'User-Agent': 'BikeDashboard/1.0' } }
        );
        if (!res.ok) return null;
        const data = await res.json();
        const a = data.address || {};
        
        // Try to get municipality/city - covers entire Capital Region
        const municipality = a.municipality || a.city || a.town || a.village || "Capital Region";
        const neighborhood = a.suburb || a.neighbourhood || a.quarter || a.hamlet || "";
        
        // Return format: "Municipality, Neighborhood" or just "Municipality"
        return neighborhood ? `${municipality}, ${neighborhood}` : municipality;
    } catch (e) { return null; }
}
